'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useTradeStore } from '@/stores/tradeStore';\nimport { ExchangeAPI } from '@/lib/exchange-api';\nimport OrderExecutionPanel from '@/components/trade/OrderExecutionPanel';\nimport TradeHistoryTable from '@/components/trade/TradeHistoryTable';\nimport RealTimeMarketData from '@/components/trade/RealTimeMarketData';\nimport RiskManagementWidget from '@/components/trade/RiskManagementWidget';\nimport PositionsWidget from '@/components/trade/PositionsWidget';\nimport ExchangeConnectionStatus from '@/components/trade/ExchangeConnectionStatus';\nimport { OrderType, Side, TimeInForce, OrderStatus } from '@/types/trade';\n\ntype MarketData = {\n  symbol: string;\n  bid: number;\n  ask: number;\n  last: number;\n  volume: number;\n  change: number;\n  timestamp: number;\n};\n\ntype Position = {\n  symbol: string;\n  quantity: number;\n  avgPrice: number;\n  currentPrice: number;\n  pnl: number;\n  pnlPercent: number;\n};\n\nexport default function TradeExecutionPage() {\n  const {\n    selectedExchange,\n    selectedSymbol,\n    orders,\n    trades,\n    positions,\n    addOrder,\n    updateOrder,\n    addTrade,\n    updatePosition,\n    setConnectionStatus,\n    setMarketData,\n    marketData\n  } = useTradeStore();\n  \n  const [isConnected, setIsConnected] = useState(false);\n  const [apiError, setApiError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  // Initialize exchange connection and market data stream\n  useEffect(() => {\n    const initExchangeConnection = async () => {\n      if (!selectedExchange) return;\n      \n      setIsLoading(true);\n      try {\n        // Connect to exchange\n        await ExchangeAPI.connect(selectedExchange);\n        setIsConnected(true);\n        setConnectionStatus('connected');\n        setApiError(null);\n        \n        // Subscribe to market data\n        if (selectedSymbol) {\n          ExchangeAPI.subscribeToMarketData(selectedSymbol, (data) => {\n            setMarketData(data);\n          });\n        }\n        \n        // Load initial positions\n        const initialPositions = await ExchangeAPI.getPositions();\n        initialPositions.forEach(pos => updatePosition(pos.symbol, pos));\n        \n      } catch (error) {\n        console.error('Exchange connection failed:', error);\n        setIsConnected(false);\n        setConnectionStatus('disconnected');\n        setApiError(`Failed to connect to ${selectedExchange}: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    initExchangeConnection();\n    \n    return () => {\n      ExchangeAPI.disconnect();\n      setIsConnected(false);\n      setConnectionStatus('disconnected');\n    };\n  }, [selectedExchange, selectedSymbol, setConnectionStatus, setMarketData, updatePosition]);\n  \n  // Handle order submission\n  const handleOrderSubmit = useCallback(async (orderData: {\n    symbol: string;\n    side: Side;\n    type: OrderType;\n    quantity: number;\n    price?: number;\n    stopPrice?: number;\n    timeInForce?: TimeInForce;\n  }) => {\n    if (!isConnected) {\n      setApiError('Not connected to exchange');\n      return;\n    }\n    \n    setIsLoading(true);\n    try {\n      // Validate order\n      const validation = ExchangeAPI.validateOrder(orderData);\n      if (!validation.valid) {\n        throw new Error(validation.error);\n      }\n      \n      // Create pending order\n      const pendingOrder = {\n        id: `order_${Date.now()}`,\n        ...orderData,\n        status: 'pending' as OrderStatus,\n        timestamp: new Date().toISOString(),\n        exchange: selectedExchange,\n        filledQuantity: 0,\n        remainingQuantity: orderData.quantity\n      };\n      \n      addOrder(pendingOrder);\n      \n      // Execute order via exchange API\n      const result = await ExchangeAPI.executeOrder(orderData);\n      \n      // Update order status\n      updateOrder(pendingOrder.id, {\n        status: result.status,\n        orderId: result.orderId,\n        filledQuantity: result.filledQuantity,\n        avgPrice: result.avgPrice,\n        fees: result.fees,\n        remainingQuantity: result.remainingQuantity\n      });\n      \n      // If order was filled, add to trade history\n      if (result.filledQuantity > 0) {\n        addTrade({\n          id: `trade_${Date.now()}`,\n          orderId: pendingOrder.id,\n          exchangeOrderId: result.orderId,\n          symbol: orderData.symbol,\n          side: orderData.side,\n          quantity: result.filledQuantity,\n          price: result.avgPrice,\n          fees: result.fees,\n          timestamp: new Date().toISOString(),\n          exchange: selectedExchange\n        });\n        \n        // Update position\n        const currentPosition = positions[orderData.symbol] || { quantity: 0, avgPrice: 0 };\n        const newQuantity = orderData.side === 'buy' \n          ? currentPosition.quantity + result.filledQuantity\n          : currentPosition.quantity - result.filledQuantity;\n        \n        let newAvgPrice = currentPosition.avgPrice;\n        if (orderData.side === 'buy' && newQuantity > 0) {\n          newAvgPrice = (currentPosition.quantity * currentPosition.avgPrice + \n            result.filledQuantity * result.avgPrice) / newQuantity;\n        }\n        \n        updatePosition(orderData.symbol, {\n          symbol: orderData.symbol,\n          quantity: newQuantity,\n          avgPrice: newAvgPrice,\n          currentPrice: marketData?.[orderData.symbol]?.last || result.avgPrice,\n          pnl: 0,\n          pnlPercent: 0\n        });\n      }\n      \n      setApiError(null);\n    } catch (error) {\n      console.error('Order execution failed:', error);\n      setApiError(error instanceof Error ? error.message : 'Order execution failed');\n      \n      // Update order status to failed\n      if (orderData.symbol) {\n        const orderId = `order_${Date.now()}`;\n        updateOrder(orderId, {\n          status: 'failed',\n          error: error instanceof Error ? error.message : 'Unknown error'\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isConnected, selectedExchange, addOrder, updateOrder, addTrade, positions, updatePosition, marketData]);\n  \n  // Handle order cancellation\n  const handleCancelOrder = useCallback(async (orderId: string) => {\n    try {\n      const order = orders.find(o => o.id === orderId);\n      if (!order) throw new Error('Order not found');\n      \n      if (order.exchangeOrderId) {\n        await ExchangeAPI.cancelOrder(order.exchangeOrderId);\n      }\n      \n      updateOrder(orderId, { \n        status: 'cancelled',\n        remainingQuantity: 0\n      });\n    } catch (error) {\n      console.error('Cancel order failed:', error);\n      setApiError(error instanceof Error ? error.message : 'Cancel failed');\n    }\n  }, [orders, updateOrder]);\n  \n  // Calculate risk metrics\n  const calculateRiskMetrics = useCallback(() => {\n    const totalExposure = Object.values(positions).reduce((sum, pos) => {\n      return sum + (pos.quantity * pos.currentPrice);\n    }, 0);\n    \n    const totalPnl = Object.values(positions).reduce((sum, pos) => {\n      return sum + pos.pnl;\n    }, 0);\n    \n    const maxPositionSize = Math.max(...Object.values(positions).map(p => \n      Math.abs(p.quantity * p.currentPrice)\n    ), 0);\n    \n    return {\n      totalExposure,\n      totalPnl,\n      maxPositionSize,\n      positionCount: Object.keys(positions).length\n    };\n  }, [positions]);\n  \n  const riskMetrics = calculateRiskMetrics();\n  \n  return (\n    <div className=\"min-h-screen bg-gray-900 text-gray-100 p-4 md:p-6\">\n      <div className=\"container mx-auto max-w-7xl\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-white mb-2\">Trade Execution Module</h1>\n          <p className=\"text-gray-400\">Execute trades with real-time market data and risk management</p>\n        </div>\n        \n        {/* Connection Status */}\n        <ExchangeConnectionStatus \n          isConnected={isConnected}\n          exchange={selectedExchange}\n          error={apiError}\n          isLoading={isLoading}\n        />\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6\">\n          {/* Left Column - Trading Interface */}\n          <div className=\"lg:col-span-2 space-y-4 md:space-y-6\">\n            {/* Real-time Market Data */}\n            <div className=\"bg-gray-800 rounded-xl shadow-lg border border-gray-700 overflow-hidden\">\n              <RealTimeMarketData \n                marketData={marketData}\n                selectedSymbol={selectedSymbol}\n                isLoading={isLoading}\n              />\n            </div>\n            \n            {/* Order Execution Panel */}\n            <div className=\"bg-gray-800 rounded-xl shadow-lg border border-gray-700 p-4 md:p-6\">\n              <OrderExecutionPanel \n                onSubmit={handleOrderSubmit}\n                isConnected={isConnected}\n                selectedSymbol={selectedSymbol}\n                marketData={marketData?.[selectedSymbol || '']}\n                isLoading={isLoading}\n              />\n            </div>\n            \n            {/* Trade History */}\n            <div className=\"bg-gray-800 rounded-xl shadow-lg border border-gray-700 p-4 md:p-6\">\n              <h2 className=\"text-lg md:text-xl font-semibold text-white mb-4\">Recent Trades</h2>\n              <TradeHistoryTable \n                trades={trades.slice(0, 10)}\n                isLoading={isLoading}\n              />\n            </div>\n          </div>\n          \n          {/* Right Column - Risk & Positions */}\n          <div className=\"space-y-4 md:space-y-6\">\n            {/* Risk Management Widget */}\n            <div className=\"bg-gray-800 rounded-xl shadow-lg border border-gray-700 p-4 md:p-6\">\n              <RiskManagementWidget \n                riskMetrics={riskMetrics}\n                positions={positions}\n                isLoading={isLoading}\n              />\n            </div>\n            \n            {/* Current Positions */}\n            <div className=\"bg-gray-800 rounded-xl shadow-lg border border-gray-700 p-4 md:p-6\">\n              <PositionsWidget \n                positions={positions}\n                marketData={marketData}\n                isLoading={isLoading}\n              />\n            </div>\n            \n            {/* Order Status Summary */}\n            <div className=\"bg-gray-800 rounded-xl shadow-lg border border-gray-700 p-4 md:p-6\">\n              <h2 className=\"text-lg md:text-xl font-semibold text-white mb-4\">Order Status</h2>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-400\">Pending Orders</span>\n                  <span className=\"text-yellow-400 font-medium\">\n                    {orders.filter(o => o.status === 'pending').length}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-400\">Filled Today</span>\n                  <span className=\"text-green-400 font-medium\">\n                    {orders.filter(o => o.status === 'filled').length}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-gray-400\">Total Orders</span>\n                  <span className=\"text-blue-400 font-medium\">\n                    {orders.length}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"     },     {       "path": "components/trade/OrderExecutionPanel.tsx",       "content": "'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { OrderType, Side, TimeInForce } from '@/types/trade';\n\ntype MarketData = {\n  bid: number;\n  ask: number;\n  last: number;\n  volume: number;\n  change: number;\n};\n\ntype OrderExecutionPanelProps = {\n  onSubmit: (orderData: {\n    symbol: string;\n    side: Side;\n    type: OrderType;\n    quantity: number;\n    price?: number;\n    stopPrice?: number;\n    timeInForce?: TimeInForce;\n  }) => void;\n  isConnected: boolean;\n  selectedSymbol?: string;\n  marketData?: MarketData;\n  isLoading: boolean;\n};\n\nexport default function OrderExecutionPanel({\n  onSubmit,\n  isConnected,\n  selectedSymbol = 'BTC/USDT',\n  marketData,\n  isLoading\n}: OrderExecutionPanelProps) {\n  const [side, setSide] = useState<Side>('buy');\n  const [orderType, setOrderType] = useState<OrderType>('limit');\n  const [quantity, setQuantity] = useState<string>('');\n  const [price, setPrice] = useState<string>('');\n  const [stopPrice, setStopPrice] = useState<string>('');\n  const [timeInForce, setTimeInForce] = useState<TimeInForce>('GTC');\n  \n  // Set default price based on market data\n  useEffect(() => {\n    if (marketData) {\n      if (orderType === 'limit' && !price) {\n        setPrice(side === 'buy' ? marketData.bid.toString() : marketData.ask.toString());\n      }\n      if (orderType === 'stop' && !stopPrice) {\n        setStopPrice(marketData.last.toString());\n      }\n    }\n  }, [marketData, orderType, side, price, stopPrice]);\n  \n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!isConnected) {\n      alert('Please connect to exchange first');\n      return;\n    }\n    \n    const orderData = {\n      symbol: selectedSymbol,\n      side,\n      type: orderType,\n      quantity: parseFloat(quantity),\n      ...(orderType === 'limit' && price && { price: parseFloat(price) }),\n      ...(orderType === 'stop' && stopPrice && { stopPrice: parseFloat(stopPrice) }),\n      timeInForce\n    };\n    \n    onSubmit(orderData);\n    \n    // Reset form\n    setQuantity('');\n    if (orderType === 'limit') setPrice('');\n    if (orderType === 'stop') setStopPrice('');\n  };\n  \n  const handleQuickQuantity = (percent: number) => {\n    if (marketData?.last) {\n      const maxQuantity = 100000 / marketData.last; // Example: $100k position\n      setQuantity((maxQuantity * percent).toFixed(4));\n    }\n  };\n  \n  return (\n    <div>\n      <h2 className=\"text-xl font-semibold text-white mb-4\">Execute Order</h2>\n      \n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        {/* Symbol and Side Selection */}\n        <div className=\"flex space-x-4\">\n          <div className=\"flex-1\">\n            <label className=\"block text-sm font-medium text-gray-400 mb-1\">Symbol</label>\n            <div className=\"bg-gray-700 text-white px-3 py-2 rounded-lg border border-gray-600\">\n              {selectedSymbol}\n            </div>\n          </div>\n          \n          <div className=\"flex-1\">\n            <label className=\"block text-sm font-medium text-gray-400 mb-1\">Side</label>\n            <div className=\"flex space-x-2\">\n              <button\n                type=\"button\"\n                onClick={() => setSide('buy')}\n                className={`flex-1 py-2 rounded-lg font-medium transition-colors ${side === 'buy' ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}\n              >\n                Buy\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setSide('sell')}\n                className={`flex-1 py-2 rounded-lg font-medium transition-colors ${side === 'sell' ? 'bg-red-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}\n              >\n                Sell\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        {/* Order Type */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-400 mb-1\">Order Type</label>\n          <div className=\"grid grid-cols-3 gap-2\">\n            {(['market', 'limit', 'stop'] as OrderType[]).map((type) => (\n              <button\n                key={type}\n                type=\"button\"\n                onClick={() => setOrderType(type)}\n                className={`py-2 rounded-lg font-medium transition-colors ${orderType === type ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`}\n              >\n                {type.charAt(0).toUpperCase() + type.slice(1)}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        {/* Quantity */}\n        <div>\n          <div className=\"flex justify-between items-center mb-1\">\n            <label className=\"text-sm font-medium text-gray-400\">Quantity</label>\n            <div className=\"flex space-x-2\">\n              {[0.25, 0.5, 0.75, 1].map((percent) => (\n                <button\n                  key={percent}\n                  type=\"button\"\n                  onClick={() => handleQuickQuantity(percent)}\n                  className=\"text-xs px-2 py-1 bg-gray-700 text-gray-300 rounded hover:bg-gray-600\"\n                >\n                  {percent * 100}%\n                </button>\n              ))}\n            </div>\n          </div>\n          <input\n            type=\"number\"\n            value={quantity}\n            onChange={(e) => setQuantity(e.target.value)}\n            step=\"0.0001\"\n            min=\"0\"\n            required\n            className=\"w-full bg-gray-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            placeholder=\"Enter quantity\"\n          />\n        </div>\n        \n        {/* Price Inputs */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          {orderType === 'limit' && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-400 mb-1\">Price</label>\n              <input\n                type=\"number\"\n                value={price}\n                onChange={(e) => setPrice(e.target.value)}\n                step=\"0.01\"\n                min=\"0\"\n                required={orderType === 'limit'}\n                className=\"w-full bg-gray-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter price\"\n              />\n            </div>\n          )}\n          \n          {orderType === 'stop' && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-400 mb-1\">Stop Price</label>\n              <input\n                type=\"number\"\n                value={stopPrice}\n                onChange={(e) => setStopPrice(e.target.value)}\n                step=\"0.01\"\n                min=\"0\"\n                required={orderType === 'stop'}\n                className=\"w-full bg-gray-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                placeholder=\"Enter stop price\"\n              />\n            </div>\n          )}\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-400 mb-1\">Time in Force</label>\n            <select\n              value={timeInForce}\n              onChange={(e) => setTimeInForce(e.target.value as TimeInForce)}\n              className=\"w-full bg-gray-700 text-white px-3 py-2 rounded-lg border border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\n            >\n              <option value=\"GTC\">GTC (Good Till Cancel)</option>\n              <option value=\"IOC\">IOC (Immediate or Cancel)</option>\n              <option value=\"FOK\">FOK (Fill or Kill)</option>\n            </select>\n          </div>\n        </div>\n        \n        {/* Market Data Info */}\n        {marketData && (\n          <div className=\"bg-gray-700 rounded-lg p-3\">\n            <div className=\"grid grid-cols-2 gap-2 text-sm\">\n              <div className=\"text-gray-400\">Bid:</div>\n              <div className=\"text-green-400 font-medium\">{marketData.bid.toFixed(2)}</div>\n              <div className=\"text-gray-400\">Ask:</div>\n              <div className=\"text-red-400 font-medium\">{marketData.ask.toFixed(2)}</div>\n              <div className=\"text-gray-400\">Last:</div>\n              <div className=\"text-white font-medium\">{marketData.last.toFixed(2)}</div>\n              <div className=\"text-gray-400\">Change:</div>\n              <div className={`font-medium ${marketData.change >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                {marketData.change >= 0 ? '+' : ''}{marketData.change.toFixed(2)}%\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {/* Submit Button */}\n        <button\n          type=\"submit\"\n          disabled={!isConnected || isLoading || !quantity}\n          className={`w-full py-3 rounded-lg font-semibold transition-colors ${side === 'buy' ? 'bg-green-600 hover:bg-green-700' : 'bg-red-600 hover:bg-red-700'} ${(!isConnected || isLoading || !quantity) ? 'opacity-50 cursor-not-allowed' : ''}`}\n        >\n          {isLoading ? 'Processing...' : `${side.toUpperCase()} ${selectedSymbol}`}\n        </button>\n      </form>\n    </div>\n  );\n}\n"     },     {       "path": "components/trade/TradeHistoryTable.tsx",       "content": "'use client';\n\nimport React from 'react';\nimport { Trade } from '@/types/trade';\n\ntype TradeHistoryTableProps = {\n  trades: Trade[];\n  isLoading: boolean;\n};\n\nexport default function TradeHistoryTable({ trades, isLoading }: TradeHistoryTableProps) {\n  if (isLoading) {\n    return (\n      <div className=\"space-y-3\">\n        {[...Array(5)].map((_, i) => (\n          <div key={i} className=\"h-12 bg-gray-700 rounded-lg animate-pulse\"></div>\n        ))}\n      </div>\n    );\n  }\n  \n  if (trades.length === 0) {\n    return (\n      <div className=\"text-center py-8 text-gray-500\">\n        No trades yet. Execute your first order!\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"overflow-x-auto\">\n      <table className=\"w-full\">\n        <thead>\n          <tr className=\"text-left text-sm text-gray-400 border-b border-gray-700\">\n            <th className=\"pb-3 px-2\">Time</th>\n            <th className=\"pb-3 px-2\">Symbol</th>\n            <th className=\"pb-3 px-2\">Side</th>\n            <th className=\"pb-3 px-2\">Quantity</th>\n            <th className=\"pb-3 px-2\">Price</th>\n            <th className=\"pb-3 px-2\">Fees</th>\n            <th className=\"pb-3 px-2\">Status</th>\n          </tr>\n        </thead>\n        <tbody>\n          {trades.map((trade) => {\n            const date = new Date(trade.timestamp);\n            const timeString = `${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;\n            \n            return (\n              <tr \n                key={trade.id} \n                className=\"border-b border-gray-800 hover:bg-gray-750 transition-colors\"\n              >\n                <td className=\"py-3 px-2 text-sm text-gray-300\">\n                  {timeString}\n                </td>\n                <td className=\"py-3 px-2 font-medium\">\n                  {trade.symbol}\n                </td>\n                <td className=\"py-3 px-2\">\n                  <span className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${trade.side === 'buy' ? 'bg-green-900 text-green-200' : 'bg-red-900 text-red-200'}`}>\n                    {trade.side.toUpperCase()}\n                  </span>\n                </td>\n                <td className=\"py-3 px-2 text-gray-300\">\n                  {trade.quantity.toFixed(4)}\n                </td>\n                <td className=\"py-3 px-2 font-medium\">\n                  ${trade.price.toFixed(2)}\n                </td>\n                <td className=\"py-3 px-2 text-gray-400 text-sm\">\n                  ${trade.fees?.toFixed(4) || '0.0000'}\n                </td>\n                <td className=\"py-3 px-2\">\n                  <span className=\"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-900 text-blue-200\">\n                    Filled\n                  </span>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"     },     {       "path": "components/trade/RealTimeMarketData.tsx",       "content": "'use client';\n\nimport React, { useEffect, useState } from 'react';\n\ntype MarketData = {\n  [symbol: string]: {\n    bid: number;\n    ask: number;\n    last: number;\n    volume: number;\n    change: number;\n    timestamp: number;\n  };\n};\n\ntype RealTimeMarketDataProps = {\n  marketData?: MarketData;\n  selectedSymbol?: string;\n  isLoading: boolean;\n};\n\nexport default function RealTimeMarketData({ \n  marketData, \n  selectedSymbol = 'BTC/USDT',\n  isLoading \n}: RealTimeMarketDataProps) {\n  const [currentTime, setCurrentTime] = useState(new Date());\n  \n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n    \n    return () => clearInterval(timer);\n  }, []);\n  \n  const symbolData = selectedSymbol && marketData?.[selectedSymbol];\n  \n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"h-8 bg-gray-700 rounded w-48 mb-4 animate-pulse\"></div>\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          {[...Array(4)].map((_, i) => (\n            <div key={i} className=\"h-20 bg-gray-700 rounded-lg animate-pulse\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"p-4 md:p-6\">\n      <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-6\">\n        <div>\n          <h2 className=\"text-xl font-bold text-white\">{selectedSymbol}</h2>\n          <p className=\"text-gray-400 text-sm\">Real-time Market Data</p>\n        </div>\n        <div className=\"text-gray-400 text-sm mt-2 md:mt-0\">\n          {currentTime.toLocaleTimeString()}\n        </div>\n      </div>\n      \n      {symbolData ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {/* Last Price */}\n          <div className=\"bg-gray-750 rounded-xl p-4 border border-gray-700\">\n            <div className=\"text-gray-400 text-sm mb-1\">Last Price</div>\n            <div className=\"flex items-center\">\n              <span className=\"text-2xl font-bold text-white\">\n                ${symbolData.last.toFixed(2)}\n              </span>\n              <span className={`ml-3 px-2 py-1 rounded text-sm font-medium ${symbolData.change >= 0 ? 'bg-green-900 text-green-200' : 'bg-red-900 text-red-200'}`}>\n                {symbolData.change >= 0 ? '+' : ''}{symbolData.change.toFixed(2)}%\n              </span>\n            </div>\n          </div>\n          \n          {/* Bid/Ask Spread */}\n          <div className=\"bg-gray-750 rounded-xl p-4 border border-gray-700\">\n            <div className=\"text-gray-400 text-sm mb-1\">Bid/Ask</div>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-300\">Bid</span>\n                <span className=\"text-green-400 font-medium\">${symbolData.bid.toFixed(2)}</span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-gray-300\">Ask</span>\n                <span className=\"text-red-400 font-medium\">${symbolData.ask.toFixed(2)}</span>\n              </div>\n              <div className=\"flex justify-between pt-2 border-t border-gray-700\">\n                <span className=\"text-gray-300\">Spread</span>\n                <span className=\"text-yellow-400 font-medium\">\n                  ${(symbolData.ask - symbolData.bid).toFixed(2)}\n                </span>\n              </div>\n            </div>\n          </div>\n          \n          {/* Volume */}\n          <div className=\"bg-gray-750 rounded-xl p-4 border border-gray-700\">\n            <div className=\"text-gray-400 text-sm mb-1\">24h Volume</div>\n            <div className=\"text-2xl font-bold text-white mb-2\">\n              {symbolData.volume.toLocaleString()}\n            </div>\n            <div className=\"w-full bg-gray-700 rounded-full h-2\">\n              <div \n                className=\"bg-blue-500 h-2 rounded-full\"\n                style={{ width: `${Math.min(symbolData.volume / 1000000 * 100, 100)}%` }}\n              ></div>\n            </div>\n          </div>\n          \n          {/* Market Status */}\n          <div className=\"bg-gray-750 rounded-xl p-4 border border-gray-700\">\n            <div className=\"text-gray-400 text-sm mb-1\">Market Status</div>\n            <div className=\"flex items-center mb-2\">\n              <div className=\"w-3 h-3 rounded-full bg-green-500 mr-2\"></div>\n              <span className
'use client';\n\nimport React, { useState } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { \n  Search, \n  Filter, \n  Download, \n  Play, \n  Pause, \n  RefreshCw, \n  BarChart3, \n  TrendingUp, \n  Cpu, \n  Zap, \n  Shield, \n  AlertTriangle,\n  ChevronRight,\n  ChevronLeft,\n  Activity,\n  Globe,\n  Layers,\n  AlertCircle,\n  Target,\n  PieChart as PieChartIcon,\n  Network,\n  TrendingDown,\n  MessageSquare,\n  Bell,\n  Users,\n  BarChart2,\n  Settings,\n  User,\n  LogOut\n} from 'lucide-react';\n\n// Mock data for charts\nconst chartData = [\n  { time: '09:30', price: 45000 },\n  { time: '10:00', price: 45200 },\n  { time: '10:30', price: 45100 },\n  { time: '11:00', price: 45300 },\n  { time: '11:30', price: 45500 },\n  { time: '12:00', price: 45400 },\n  { time: '12:30', price: 45600 },\n  { time: '13:00', price: 45700 },\n  { time: '13:30', price: 45800 },\n  { time: '14:00', price: 45900 },\n];\n\nconst instruments = [\n  { symbol: 'BTC/USDT', price: '45,890.12', change: '+2.34%', volume: '1.2B' },\n  { symbol: 'ETH/USDT', price: '2,450.67', change: '+1.23%', volume: '850M' },\n  { symbol: 'SOL/USDT', price: '98.45', change: '+5.67%', volume: '320M' },\n  { symbol: 'XRP/USDT', price: '0.5678', change: '-0.45%', volume: '450M' },\n  { symbol: 'ADA/USDT', price: '0.4321', change: '+0.89%', volume: '210M' },\n];\n\nconst signals = [\n  { id: 1, symbol: 'BTC/USDT', type: 'BUY', confidence: 92, timestamp: '10:23:45' },\n  { id: 2, symbol: 'ETH/USDT', type: 'SELL', confidence: 78, timestamp: '10:25:12' },\n  { id: 3, symbol: 'SOL/USDT', type: 'BUY', confidence: 85, timestamp: '10:27:33' },\n];\n\nexport default function Home() {\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [isTrading, setIsTrading] = useState(false);\n  const [orderType, setOrderType] = useState<'market' | 'limit'>('market');\n  const [symbol, setSymbol] = useState('BTC/USDT');\n  const [quantity, setQuantity] = useState('0.1');\n  const [limitPrice, setLimitPrice] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [orderStatus, setOrderStatus] = useState<{\n    type: 'success' | 'error' | 'pending' | null;\n    message: string;\n  }>({ type: null, message: '' });\n\n  const handleTradeExecution = async (side: 'buy' | 'sell') => {\n    setIsSubmitting(true);\n    setOrderStatus({ type: 'pending', message: 'Processing order...' });\n\n    try {\n      // Validate inputs\n      if (!quantity || parseFloat(quantity) <= 0) {\n        throw new Error('Invalid quantity');\n      }\n\n      if (orderType === 'limit' && (!limitPrice || parseFloat(limitPrice) <= 0)) {\n        throw new Error('Invalid limit price');\n      }\n\n      // Simulate API call to exchange\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      // Calculate fees (simulated)\n      const tradeAmount = parseFloat(quantity) * 45890.12;\n      const fee = tradeAmount * 0.001; // 0.1% fee\n      const totalCost = side === 'buy' ? tradeAmount + fee : tradeAmount - fee;\n\n      // Simulate successful order\n      setOrderStatus({\n        type: 'success',\n        message: `${side.toUpperCase()} order executed successfully!\\nQuantity: ${quantity} ${symbol.split('/')[0]}\\n${orderType === 'limit' ? `Limit Price: $${limitPrice}` : 'Market Order'}\\nFee: $${fee.toFixed(2)}`\n      });\n\n      // Reset form\n      setQuantity('0.1');\n      setLimitPrice('');\n    } catch (error) {\n      setOrderStatus({\n        type: 'error',\n        message: error instanceof Error ? error.message : 'Trade execution failed'\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const clearOrderStatus = () => {\n    setOrderStatus({ type: null, message: '' });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-4 md:p-6\">\n      {/* Header */}\n      <header className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex items-center space-x-2\">\n          <Cpu className=\"h-8 w-8 text-blue-500\" />\n          <h1 className=\"text-2xl font-bold\">AI Trading Platform</h1>\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <Button variant=\"ghost\" size=\"icon\">\n            <Bell className=\"h-5 w-5\" />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\">\n            <Settings className=\"h-5 w-5\" />\n          </Button>\n          <Button variant=\"ghost\" size=\"icon\">\n            <User className=\"h-5 w-5\" />\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Column - Charts & Trading */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Chart Section */}\n          <Card className=\"bg-gray-800 border-gray-700\">\n            <CardHeader>\n              <div className=\"flex justify-between items-center\">\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <BarChart3 className=\"h-5 w-5\" />\n                  <span>BTC/USDT Chart</span>\n                </CardTitle>\n                <div className=\"flex space-x-2\">\n                  <Button size=\"sm\" variant=\"outline\">\n                    1D\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\">\n                    1W\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\">\n                    1M\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"h-80\">\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <LineChart data={chartData}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n                    <XAxis dataKey=\"time\" stroke=\"#9CA3AF\" />\n                    <YAxis stroke=\"#9CA3AF\" />\n                    <Tooltip \n                      contentStyle={{ backgroundColor: '#1F2937', borderColor: '#374151' }}\n                      labelStyle={{ color: '#D1D5DB' }}\n                    />\n                    <Line \n                      type=\"monotone\" \n                      dataKey=\"price\" \n                      stroke=\"#3B82F6\" \n                      strokeWidth={2}\n                      dot={false}\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Trade Execution Module */}\n          <Card className=\"bg-gray-800 border-gray-700\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Target className=\"h-5 w-5\" />\n                <span>Trade Execution</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {/* Order Status */}\n              {orderStatus.type && (\n                <div className={`mb-4 p-4 rounded-lg ${orderStatus.type === 'success' ? 'bg-green-900/30 border border-green-700' : orderStatus.type === 'error' ? 'bg-red-900/30 border border-red-700' : 'bg-yellow-900/30 border border-yellow-700'}`}>\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <div className=\"flex items-center space-x-2 mb-1\">\n                        {orderStatus.type === 'success' && <Shield className=\"h-4 w-4 text-green-400\" />}\n                        {orderStatus.type === 'error' && <AlertCircle className=\"h-4 w-4 text-red-400\" />}\n                        {orderStatus.type === 'pending' && <Activity className=\"h-4 w-4 text-yellow-400\" />}\n                        <span className=\"font-medium\">\n                          {orderStatus.type === 'success' ? 'Order Successful' : \n                           orderStatus.type === 'error' ? 'Order Failed' : 'Processing Order'}\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-300 whitespace-pre-line\">{orderStatus.message}</p>\n                    </div>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\" \n                      onClick={clearOrderStatus}\n                      className=\"text-gray-400 hover:text-white\"\n                    >\n                      âœ•\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                {/* Symbol Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Symbol</label>\n                  <div className=\"flex space-x-2\">\n                    {instruments.slice(0, 3).map((inst) => (\n                      <Button\n                        key={inst.symbol}\n                        variant={symbol === inst.symbol ? \"default\" : \"outline\"}\n                        size=\"sm\"\n                        onClick={() => setSymbol(inst.symbol)}\n                      >\n                        {inst.symbol}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Order Type */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Order Type</label>\n                  <div className=\"flex space-x-2\">\n                    <Button\n                      variant={orderType === 'market' ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setOrderType('market')}\n                    >\n                      Market\n                    </Button>\n                    <Button\n                      variant={orderType === 'limit' ? \"default\" : \"outline\"}\n                      size=\"sm\"\n                      onClick={() => setOrderType('limit')}\n                    >\n                      Limit\n                    </Button>\n                  </div>\n                </div>\n\n                {/* Quantity Input */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Quantity</label>\n                  <Input\n                    type=\"number\"\n                    value={quantity}\n                    onChange={(e) => setQuantity(e.target.value)}\n                    className=\"bg-gray-700 border-gray-600 text-white\"\n                    placeholder=\"Enter quantity\"\n                    min=\"0\"\n                    step=\"0.001\"\n                  />\n                </div>\n\n                {/* Limit Price Input (only for limit orders) */}\n                {orderType === 'limit' && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">Limit Price (USD)</label>\n                    <Input\n                      type=\"number\"\n                      value={limitPrice}\n                      onChange={(e) => setLimitPrice(e.target.value)}\n                      className=\"bg-gray-700 border-gray-600 text-white\"\n                      placeholder=\"Enter limit price\"\n                      min=\"0\"\n                      step=\"0.01\"\n                    />\n                  </div>\n                )}\n\n                {/* Fee Calculation Preview */}\n                <div className=\"p-3 bg-gray-700/50 rounded-lg\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-gray-400\">Estimated Fee:</span>\n                    <span className=\"text-yellow-400\">\n                      ${(parseFloat(quantity || '0') * 45890.12 * 0.001).toFixed(2)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between text-sm mt-1\">\n                    <span className=\"text-gray-400\">Total Cost:</span>\n                    <span className=\"text-green-400\">\n                      ${(parseFloat(quantity || '0') * 45890.12).toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex space-x-3 pt-2\">\n                  <Button\n                    className=\"flex-1 bg-green-600 hover:bg-green-700 text-white\"\n                    size=\"lg\"\n                    onClick={() => handleTradeExecution('buy')}\n                    disabled={isSubmitting}\n                  >\n                    {isSubmitting ? (\n                      <RefreshCw className=\"h-4 w-4 animate-spin mr-2\" />\n                    ) : (\n                      <TrendingUp className=\"h-4 w-4 mr-2\" />\n                    )}\n                    Buy {symbol.split('/')[0]}\n                  </Button>\n                  <Button\n                    className=\"flex-1 bg-red-600 hover:bg-red-700 text-white\"\n                    size=\"lg\"\n                    onClick={() => handleTradeExecution('sell')}\n                    disabled={isSubmitting}\n                  >\n                    {isSubmitting ? (\n                      <RefreshCw className=\"h-4 w-4 animate-spin mr-2\" />\n                    ) : (\n                      <TrendingDown className=\"h-4 w-4 mr-2\" />\n                    )}\n                    Sell {symbol.split('/')[0]}\n                  </Button>\n                </div>\n\n                {/* Exchange Connection Status */}\n                <div className=\"flex items-center justify-between pt-4 border-t border-gray-700\">\n                  <div className=\"flex items-center space-x-2\">\n                    <div className=\"flex items-center space-x-1\">\n                      <div className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"></div>\n                      <span className=\"text-sm text-gray-400\">Connected to Binance</span>\n                    </div>\n                    <Badge variant=\"outline\" className=\"text-xs\">Demo Mode</Badge>\n                  </div>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-gray-400 hover:text-white\">\n                    <RefreshCw className=\"h-3 w-3 mr-1\" />\n                    Refresh\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Right Column - Market Data & Signals */}\n        <div className=\"space-y-6\">\n          {/* Market Overview */}\n          <Card className=\"bg-gray-800 border-gray-700\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Globe className=\"h-5 w-5\" />\n                <span>Market Overview</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {instruments.map((inst) => (\n                  <div key={inst.symbol} className=\"flex justify-between items-center p-3 hover:bg-gray-700/50 rounded-lg transition-colors\">\n                    <div>\n                      <div className=\"font-medium\">{inst.symbol}</div>\n                      <div className=\"text-sm text-gray-400\">Vol: {inst.volume}</div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-medium\">${inst.price}</div>\n                      <div className={`text-sm ${inst.change.startsWith('+') ? 'text-green-400' : 'text-red-400'}`}>\n                        {inst.change}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* AI Signals */}\n          <Card className=\"bg-gray-800 border-gray-700\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Cpu className=\"h-5 w-5\" />\n                <span>AI Trading Signals</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {signals.map((signal) => (\n                  <div key={signal.id} className=\"p-3 bg-gray-700/30 rounded-lg\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div className=\"font-medium\">{signal.symbol}</div>\n                      <Badge variant={signal.type === 'BUY' ? \"default\" : \"destructive\"}>\n                        {signal.type}\n                      </Badge>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <div className=\"text-sm text-gray-400\">{signal.timestamp}</div>\n                      <div className=\"flex items-center space-x-2\">\n                        <Progress value={signal.confidence} className=\"w-20\" />\n                        <span className=\"text-sm font-medium\">{signal.confidence}%</span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Quick Stats */}\n          <Card className=\"bg-gray-800 border-gray-700\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Activity className=\"h-5 w-5\" />\n                <span>Trading Stats</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"text-center p-3 bg-gray-700/30 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-green-400\">24</div>\n                  <div className=\"text-sm text-gray-400\">Today's Trades</div>\n                </div>\n                <div className=\"text-center p-3 bg-gray-700/30 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-blue-400\">92%</div>\n                  <div className=\"text-sm text-gray-400\">Win Rate</div>\n                </div>\n                <div className=\"text-center p-3 bg-gray-700/30 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-yellow-400\">$1,240</div>\n                  <div className=\"text-sm text-gray-400\">Today's P&L</div>\n                </div>\n                <div className=\"text-center p-3 bg-gray-700/30 rounded-lg\">\n                  <div className=\"text-2xl font-bold text-purple-400\">$45.2K</div>\n                  <div className=\"text-sm text-gray-400\">Total Volume</div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n"
    },
    {
      "path": "src/lib/exchange/types.ts",
      "content": "export interface ExchangeCredentials {\n  apiKey: string;\n  apiSecret: string;\n  passphrase?: string; // For Kraken\n}\n\nexport enum Exchange {\n  BINANCE = 'BINANCE',\n  KRAKEN = 'KRAKEN'\n}\n\nexport enum OrderType {\n  MARKET = 'MARKET',\n  LIMIT = 'LIMIT'\n}\n\nexport enum OrderSide {\n  BUY = 'BUY',\n  SELL = 'SELL'\n}\n\nexport interface OrderRequest {\n  exchange: Exchange;\n  symbol: string;\n  side: OrderSide;\n  type: OrderType;\n  quantity: number;\n  price?: number; // Required for limit orders\n  clientOrderId?: string;\n}\n\nexport interface OrderResponse {\n  orderId: string;\n  clientOrderId?: string;\n  symbol: string;\n  side: OrderSide;\n  type: OrderType;\n  quantity: number;\n  price?: number;\n  executedQuantity: number;\n  status: OrderStatus;\n  fee: Fee;\n  timestamp: number;\n}\n\nexport enum OrderStatus {\n  NEW = 'NEW',\n  PARTIALLY_FILLED = 'PARTIALLY_FILLED',\n  FILLED = 'FILLED',\n  CANCELED = 'CANCELED',\n  REJECTED = 'REJECTED',\n  EXPIRED = 'EXPIRED'\n}\n\nexport interface Fee {\n  currency: string;\n  amount: number;\n}\n\nexport interface TradeExecutionResult {\n  success: boolean;\n  order?: OrderResponse;\n  error?: string;\n  errorCode?: string;\n}\n\nexport interface ExchangeConfig {\n  name: Exchange;\n  baseUrl: string;\n  websocketUrl: string;\n  feeRate: number;\n  supportedSymbols: string[];\n}\n"
    },
    {
      "path": "src/lib/exchange/binance.ts",
      "content": "import { Exchange, OrderRequest, OrderResponse, TradeExecutionResult, OrderStatus, Fee } from './types';\n\nconst BINANCE_CONFIG = {\n  name: Exchange.BINANCE,\n  baseUrl: 'https://api.binance.com',\n  websocketUrl: 'wss://stream.binance.com:9443/ws',\n  feeRate: 0.001, // 0.1%\n  supportedSymbols: ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'ADAUSDT']\n};\n\nexport class BinanceExchange {\n  private apiKey: string;\n  private apiSecret: string;\n  private isDemoMode: boolean;\n\n  constructor(apiKey: string, apiSecret: string, isDemoMode = false) {\n    this.apiKey = apiKey;\n    this.apiSecret = apiSecret;\n    this.isDemoMode = isDemoMode;\n  }\n\n  async executeOrder(order: OrderRequest): Promise<TradeExecutionResult> {\n    try {\n      // Validate order\n      const validationError = this.validateOrder(order);\n      if (validationError) {\n        return {\n          success: false,\n          error: validationError\n        };\n      }\n\n      // In demo mode, simulate order execution\n      if (this.isDemoMode) {\n        return this.simulateOrderExecution(order);\n      }\n\n      // Real API call would go here\n      // const response = await this.makeApiCall(order);\n      \n      // For now, simulate with delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      return this.simulateOrderExecution(order);\n\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\n      };\n    }\n  }\n\n  private validateOrder(order: OrderRequest): string | null {\n    if (!BINANCE_CONFIG.supportedSymbols.includes(order.symbol.replace('/', ''))) {\n      return `Symbol ${order.symbol} not supported on Binance`;\n    }\n\n    if (order.quantity <= 0) {\n      return 'Quantity must be greater than 0';\n    }\n\n    if (order.type === 'LIMIT' && (!order.price || order.price <= 0)) {\n      return 'Limit price is required and must be greater than 0';\n    }\n\n    // Check minimum order size (example: $10)\n    const estimatedValue = order.quantity * (order.price || this.getCurrentPrice(order.symbol));\n    if (estimatedValue < 10) {\n      return 'Order value must be at least $10';\n    }\n\n    return null;\n  }\n\n  private async simulateOrderExecution(order: OrderRequest): Promise<TradeExecutionResult> {\n    const orderId = `BINANCE_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const currentPrice = this.getCurrentPrice(order.symbol);\n    const executedPrice = order.type === 'MARKET' ? currentPrice : (order.price || currentPrice);\n    \n    const fee: Fee = {\n      currency: 'USDT',\n      amount: order.quantity * executedPrice * BINANCE_CONFIG.feeRate\n    };\n\n    const orderResponse: OrderResponse = {\n      orderId,\n      symbol: order.symbol,\n      side: order.side,\n      type: order.type,\n      quantity: order.quantity,\n      price: order.price,\n      executedQuantity: order.quantity,\n      status: OrderStatus.FILLED,\n      fee,\n      timestamp: Date.now()\n    };\n\n    return {\n      success: true,\n      order: orderResponse\n    };\n  }\n\n  private getCurrentPrice(symbol: string): number {\n    // Mock prices for demo\n    const prices: Record<string, number> = {\n      'BTC/USDT': 45890.12,\n      'ETH/USDT': 2450.67,\n      'SOL/USDT': 98.45,\n      'XRP/USDT': 0.5678,\n      'ADA/USDT': 0.4321\n    };\n    \n    return prices[symbol] || 1;\n  }\n\n  async getOrderStatus(orderId: string): Promise<OrderResponse | null> {\n    // Simulate order status check\n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    return {\n      orderId,\n      symbol: 'BTC/USDT',\n      side: 'BUY',\n      type: 'MARKET',\n      quantity: 0.1,\n      executedQuantity: 0.1,\n      status: OrderStatus.FILLED,\n      fee: { currency: 'USDT', amount: 4.59 },\n      timestamp: Date.now() - 300000\n    };\n  }\n\n  async cancelOrder(orderId: string): Promise<boolean> {\n    // Simulate cancel order\n    await new Promise(resolve => setTimeout(resolve, 500));\n    return true;\n  }\n}\n"
    },
    {
      "path": "src/lib/exchange/kraken.ts",
      "content": "import { Exchange, OrderRequest, OrderResponse, TradeExecutionResult, OrderStatus, Fee } from './types';\n\nconst KRAKEN_CONFIG = {\n  name: Exchange.KRAKEN,\n  baseUrl: 'https://api.kraken.com',\n  websocketUrl: 'wss://ws.kraken.com',\n  feeRate: 0.0026, // 0.26% for maker/taker\n  supportedSymbols: ['XBT/USDT', 'ETH/USDT', 'SOL/USDT', 'XRP/USDT', 'ADA/USDT']\n};\n\nexport class KrakenExchange {\n  private apiKey: string;\n  private apiSecret: string;\n  private passphrase: string;\n  private isDemoMode: boolean;\n\n  constructor(apiKey: string, apiSecret: string, passphrase: string, isDemoMode = false) {\n    this.apiKey = apiKey;\n    this.apiSecret = apiSecret;\n    this.passphrase = passphrase;\n    this.isDemoMode = isDemoMode;\n  }\n\n  async executeOrder(order: OrderRequest): Promise<TradeExecutionResult> {\n    try {\n      // Validate order\n      const validationError = this.validateOrder(order);\n      if (validationError) {\n        return {\n          success: false,\n          error: validationError\n        };\n      }\n\n      // In demo mode, simulate order execution\n      if (this.isDemoMode) {\n        return this.simulateOrderExecution(order);\n      }\n\n      // Real API call would go here\n      // Kraken requires different API signature method\n      // const response = await this.makeKrakenApiCall(order);\n      \n      // For now, simulate with delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      return this.simulateOrderExecution(order);\n\n    } catch (error) {\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\n      };\n    }\n  }\n\n  private validateOrder(order: OrderRequest): string | null {\n    const krakenSymbol = this.convertToKrakenSymbol(order.symbol);\n    if (!KRAKEN_CONFIG.supportedSymbols.includes(krakenSymbol)) {\n      return `Symbol ${order.symbol} not supported on Kraken`;\n    }\n\n    if (order.quantity <= 0) {\n      return 'Quantity must be greater than 0';\n    }\n\n    if (order.type === 'LIMIT' && (!order.price || order.price <= 0)) {\n      return 'Limit price is required and must be greater than 0';\n    }\n\n    // Kraken minimum order size\n    const minOrderSize = this.getMinimumOrderSize(order.symbol);\n    if (order.quantity < minOrderSize) {\n      return `Minimum order size for ${order.symbol} is ${minOrderSize}`;\n    }\n\n    return null;\n  }\n\n  private convertToKrakenSymbol(symbol: string): string {\n    const mapping: Record<string, string> = {\n      'BTC/USDT': 'XBT/USDT',\n      'ETH/USDT': 'ETH/USDT',\n      'SOL/USDT': 'SOL/USDT',\n      'XRP/USDT': 'XRP/USDT',\n      'ADA/USDT': 'ADA/USDT'\n    };\n    \n    return mapping[symbol] || symbol;\n  }\n\n  private getMinimumOrderSize(symbol: string): number {\n    const minSizes: Record<string, number> = {\n      'BTC/USDT': 0.0001,\n      'ETH/USDT': 0.001,\n      'SOL/USDT': 0.01,\n      'XRP/USDT': 1,\n      'ADA/USDT': 1\n    };\n    \n    return minSizes[symbol] || 0.001;\n  }\n\n  private async simulateOrderExecution(order: OrderRequest): Promise<TradeExecutionResult> {\n    const orderId = `KRAKEN_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const currentPrice = this.getCurrentPrice(order.symbol);\n    const executedPrice = order.type === 'MARKET' ? currentPrice : (order.price || currentPrice);\n    \n    const fee: Fee = {\n      currency: 'USDT',\n      amount: order.quantity * executedPrice * KRAKEN_CONFIG.feeRate\n    };\n\n    const orderResponse: OrderResponse = {\n      orderId,\n      symbol: order.symbol,\n      side: order.side,\n      type: order.type,\n      quantity: order.quantity,\n      price: order.price,\n      executedQuantity: order.quantity,\n      status: OrderStatus.FILLED,\n      fee,\n      timestamp: Date.now()\n    };\n\n    return {\n      success: true,\n      order: orderResponse\n    };\n  }\n\n  private getCurrentPrice(symbol: string): number {\n    // Mock prices for demo\n    const prices: Record<string, number> = {\n      'BTC/USDT
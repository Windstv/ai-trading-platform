'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { \n  LineChart, Line, BarChart, Bar, ScatterChart, Scatter, \n  XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, \n  RadarChart, Radar, PolarGrid, PolarAngleAxis, PolarRadiusAxis,\n  Heatmap, HeatmapCell, PieChart, Pie, Cell, AreaChart, Area,\n  ComposedChart\n} from 'recharts';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Slider } from '@/components/ui/slider';\nimport { Switch } from '@/components/ui/switch';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { \n  Search, \n  Filter, \n  Download, \n  Play, \n  Pause, \n  RefreshCw, \n  BarChart3, \n  TrendingUp, \n  Cpu, \n  Zap, \n  Shield, \n  AlertTriangle,\n  ChevronRight,\n  ChevronLeft,\n  Activity,\n  Globe,\n  Layers,\n  AlertCircle,\n  Target,\n  PieChart as PieChartIcon,\n  Network,\n  TrendingDown,\n  MessageSquare,\n  Twitter,\n  Reddit,\n  Hash,\n  TrendingUp as TrendingUpIcon,\n  TrendingDown as TrendingDownIcon,\n  Bell,\n  Users,\n  Hash as HashIcon,\n  BarChart2,\n  Link as LinkIcon,\n  FileText,\n  FileSpreadsheet,\n  Calculator,\n  Cpu as CpuIcon,\n  Wind,\n  Target as TargetIcon,\n  AlertOctagon,\n  TrendingUp as TrendingUpIcon2,\n  TrendingDown as TrendingDownIcon2,\n  BarChart as BarChartIcon,\n  LineChart as LineChartIcon,\n  Newspaper,\n  TrendingUp as TrendingUpIcon3,\n  TrendingDown as TrendingDownIcon3,\n  AlertCircle as AlertCircleIcon,\n  Activity as ActivityIcon,\n  Hash as HashIcon2,\n  MessageSquare as MessageSquareIcon,\n  Globe as GlobeIcon,\n  Users as UsersIcon,\n  Bell as BellIcon,\n  Filter as FilterIcon,\n  Download as DownloadIcon,\n  Brain,\n  Sparkles,\n  Code,\n  FileJson,\n  BarChart4,\n  Target as TargetIcon2,\n  AlertOctagon as AlertOctagonIcon,\n  Zap as ZapIcon,\n  Shield as ShieldIcon,\n  Cpu as CpuIcon2,\n  Server,\n  Database,\n  Zap as ZapIcon2,\n  Globe as GlobeIcon2,\n  Layers as LayersIcon,\n  ArrowRightLeft,\n  Gauge,\n  Clock,\n  BarChart as BarChartIcon2,\n  TrendingUp as TrendingUpIcon4,\n  TrendingDown as TrendingDownIcon4,\n  ArrowUpRight,\n  ArrowDownRight,\n  CheckCircle,\n  XCircle,\n  AlertTriangle as AlertTriangleIcon\n} from 'lucide-react';\n\n// Types\ninterface StatisticalArbitragePair {\n  id: string;\n  asset1: string;\n  asset2: string;\n  correlation: number;\n  spread: number;\n  zScore: number;\n  halfLife: number;\n  entryThreshold: number;\n  exitThreshold: number;\n  sharpeRatio: number;\n  status: 'active' | 'inactive' | 'alert';\n}\n\ninterface MLFeature {\n  name: string;\n  type: 'technical' | 'fundamental' | 'market' | 'sentiment';\n  importance: number;\n  correlation: number;\n  stability: number;\n}\n\ninterface FactorModel {\n  factor: string;\n  exposure: number;\n  riskPremium: number;\n  tStat: number;\n  pValue: number;\n  rSquared: number;\n}\n\ninterface PortfolioWeight {\n  symbol: string;\n  name: string;\n  mvoWeight: number;\n  riskParityWeight: number;\n  blackLittermanWeight: number;\n  currentWeight: number;\n}\n\ninterface MonteCarloResult {\n  iteration: number;\n  portfolioReturn: number;\n  portfolioVolatility: number;\n  sharpeRatio: number;\n  maxDrawdown: number;\n}\n\ninterface PerformanceMetric {\n  metric: string;\n  value: number;\n  benchmark: number;\n  explanation: string;\n}\n\ninterface RiskFactor {\n  factor: string;\n  exposure: number;\n  contribution: number;\n  risk: number;\n  color: string;\n}\n\ninterface CrossAssetCorrelation {\n  asset1: string;\n  asset2: string;\n  correlation: number;\n  rollingCorrelation: number[];\n  regime: 'high' | 'medium' | 'low';\n}\n\n// New Types for Multi-Exchange Liquidity Aggregator\ninterface ExchangeOrderBook {\n  exchange: string;\n  symbol: string;\n  bids: { price: number; quantity: number }[];\n  asks: { price: number; quantity: number }[];\n  timestamp: number;\n  latency: number;\n  status: 'connected' | 'disconnected' | 'error';\n}\n\ninterface AggregatedOrderBook {\n  symbol: string;\n  aggregatedBids: { price: number; totalQuantity: number; exchanges: string[] }[];\n  aggregatedAsks: { price: number; totalQuantity: number; exchanges: string[] }[];\n  bestBid: number;\n  bestAsk: number;\n  spread: number;\n  totalBidLiquidity: number;\n  totalAskLiquidity: number;\n  timestamp: number;\n}\n\ninterface PriceComparison {\n  symbol: string;\n  exchanges: {\n    name: string;\n    bid: number;\n    ask: number;\n    mid: number;\n    spread: number;\n    liquidity: number;\n    latency: number;\n    isBestBid: boolean;\n    isBestAsk: boolean;\n  }[];\n  bestBidExchange: string;\n  bestAskExchange: string;\n  arbitrageOpportunity: number;\n}\n\ninterface LiquidityDepth {\n  price: number;\n  bidDepth: number;\n  askDepth: number;\n  cumulativeBid: number;\n  cumulativeAsk: number;\n}\n\ninterface OrderRoutingConfig {\n  strategy: 'best_price' | 'liquidity_weighted' | 'lowest_latency' | 'custom';\n  maxSlippage: number;\n  minLiquidity: number;\n  maxLatency: number;\n  splitOrders: boolean;\n  smartOrderRouting: boolean;\n}\n\ninterface ExchangeConnection {\n  name: string;\n  status: 'connected' | 'connecting' | 'disconnected' | 'error';\n  latency: number;\n  symbols: string[];\n  apiKeyConfigured: boolean;\n  rateLimit: number;\n  lastUpdate: number;\n}\n\n// Mock Data\nconst mockExchangeConnections: ExchangeConnection[] = [\n  { name: 'Binance', status: 'connected', latency: 45, symbols: ['BTC/USDT', 'ETH/USDT', 'SOL/USDT'], apiKeyConfigured: true, rateLimit: 1200, lastUpdate: Date.now() },\n  { name: 'Kraken', status: 'connected', latency: 62, symbols: ['BTC/USDT', 'ETH/USDT', 'XRP/USDT'], apiKeyConfigured: true, rateLimit: 600, lastUpdate: Date.now() - 1000 },\n  { name: 'Coinbase', status: 'connecting', latency: 78, symbols: ['BTC/USDT', 'ETH/USDT', 'ADA/USDT'], apiKeyConfigured: false, rateLimit: 1000, lastUpdate: Date.now() - 2000 },\n  { name: 'Bybit', status: 'connected', latency: 52, symbols: ['BTC/USDT', 'ETH/USDT', 'DOGE/USDT'], apiKeyConfigured: true, rateLimit: 800, lastUpdate: Date.now() - 500 },\n];\n\nconst mockPriceComparisons: PriceComparison[] = [\n  {\n    symbol: 'BTC/USDT',\n    exchanges: [\n      { name: 'Binance', bid: 51234.56, ask: 51235.12, mid: 51234.84, spread: 0.56, liquidity: 245.67, latency: 45, isBestBid: true, isBestAsk: false },\n      { name: 'Kraken', bid: 51233.89, ask: 51235.45, mid: 51234.67, spread: 1.56, liquidity: 189.23, latency: 62, isBestBid: false, isBestAsk: true },\n      { name: 'Coinbase', bid: 51232.45, ask: 51236.78, mid: 51234.62, spread: 4.33, liquidity: 312.45, latency: 78, isBestBid: false, isBestAsk: false },\n      { name: 'Bybit', bid: 51234.12, ask: 51235.89, mid: 51235.01, spread: 1.77, liquidity: 156.89, latency: 52, isBestBid: false, isBestAsk: false },\n    ],\n    bestBidExchange: 'Binance',\n    bestAskExchange: 'Kraken',\n    arbitrageOpportunity: 1.56\n  }\n];\n\nconst mockLiquidityDepth: LiquidityDepth[] = [\n  { price: 51100, bidDepth: 12.5, askDepth: 0, cumulativeBid: 12.5, cumulativeAsk: 0 },\n  { price: 51150, bidDepth: 18.2, askDepth: 0, cumulativeBid: 30.7, cumulativeAsk: 0 },\n  { price: 51200, bidDepth: 25.8, askDepth: 0, cumulativeBid: 56.5, cumulativeAsk: 0 },\n  { price: 51234.56, bidDepth: 45.3, askDepth: 32.1, cumulativeBid: 101.8, cumulativeAsk: 32.1 },\n  { price: 51250, bidDepth: 0, askDepth: 28.7, cumulativeBid: 101.8, cumulativeAsk: 60.8 },\n  { price: 51300, bidDepth: 0, askDepth: 42.3, cumulativeBid: 101.8, cumulativeAsk: 103.1 },\n  { price: 51350, bidDepth: 0, askDepth: 35.6, cumulativeBid: 101.8, cumulativeAsk: 138.7 },\n];\n\nconst mockAggregatedOrderBook: AggregatedOrderBook = {\n  symbol: 'BTC/USDT',\n  aggregatedBids: [\n    { price: 51234.56, totalQuantity: 45.3, exchanges: ['Binance', 'Bybit'] },\n    { price: 51233.89, totalQuantity: 32.1, exchanges: ['Kraken'] },\n    { price: 51232.45, totalQuantity: 28.7, exchanges: ['Coinbase'] },\n    { price: 51230.00, totalQuantity: 15.6, exchanges: ['Binance'] },\n  ],\n  aggregatedAsks: [\n    { price: 51235.12, totalQuantity: 32.1, exchanges: ['Binance'] },\n    { price: 51235.45, totalQuantity: 28.7, exchanges: ['Kraken'] },\n    { price: 51236.78, totalQuantity: 42.3, exchanges: ['Coinbase'] },\n    { price: 51237.50, totalQuantity: 35.6, exchanges: ['Bybit'] },\n  ],\n  bestBid: 51234.56,\n  bestAsk: 51235.12,\n  spread: 0.56,\n  totalBidLiquidity: 121.7,\n  totalAskLiquidity: 138.7,\n  timestamp: Date.now()\n};\n\nexport default function MultiExchangeLiquidityAggregator() {\n  const [activeTab, setActiveTab] = useState('overview');\n  const [selectedSymbol, setSelectedSymbol] = useState('BTC/USDT');\n  const [orderRoutingConfig, setOrderRoutingConfig] = useState<OrderRoutingConfig>({\n    strategy: 'best_price',\n    maxSlippage: 0.1,\n    minLiquidity: 10,\n    maxLatency: 100,\n    splitOrders: true,\n    smartOrderRouting: true\n  });\n  const [exchangeConnections, setExchangeConnections] = useState<ExchangeConnection[]>(mockExchangeConnections);\n  const [priceComparisons, setPriceComparisons] = useState<PriceComparison[]>(mockPriceComparisons);\n  const [liquidityDepth, setLiquidityDepth] = useState<LiquidityDepth[]>(mockLiquidityDepth);\n  const [aggregatedOrderBook, setAggregatedOrderBook] = useState<AggregatedOrderBook>(mockAggregatedOrderBook);\n  const [isAutoRefresh, setIsAutoRefresh] = useState(true);\n  \n  // Simulate real-time updates\n  useEffect(() => {\n    if (!isAutoRefresh) return;\n    \n    const interval = setInterval(() => {\n      // Update latency randomly\n      setExchangeConnections(prev => prev.map(exchange => ({\n        ...exchange,\n        latency: Math.max(30, Math.min(100, exchange.latency + (Math.random() * 10 - 5))),\n        lastUpdate: Date.now()\n      })));\n      \n      // Update price comparisons with small random changes\n      setPriceComparisons(prev => prev.map(pc => ({\n        ...pc,\n        exchanges: pc.exchanges.map(ex => ({\n          ...ex,\n          bid: ex.bid * (1 + (Math.random() * 0.001 - 0.0005)),\n          ask: ex.ask * (1 + (Math.random() * 0.001 - 0.0005)),\n          latency: Math.max(30, Math.min(100, ex.latency + (Math.random() * 5 - 2.5)))\n        }))\n      })));\n      \n    }, 2000);\n    \n    return () => clearInterval(interval);\n  }, [isAutoRefresh]);\n  \n  const handleConnectExchange = (exchangeName: string) => {\n    setExchangeConnections(prev => prev.map(exchange => \n      exchange.name === exchangeName \n        ? { ...exchange, status: 'connecting' }\n        : exchange\n    ));\n    \n    // Simulate connection delay\n    setTimeout(() => {\n      setExchangeConnections(prev => prev.map(exchange => \n        exchange.name === exchangeName \n          ? { ...exchange, status: 'connected', latency: 40 + Math.random() * 30 }\n          : exchange\n      ));\n    }, 1500);\n  };\n  \n  const handleDisconnectExchange = (exchangeName: string) => {\n    setExchangeConnections(prev => prev.map(exchange => \n      exchange.name === exchangeName \n        ? { ...exchange, status: 'disconnected' }\n        : exchange\n    ));\n  };\n  \n  const calculateOptimalOrderSplit = (quantity: number) => {\n    const currentPrice = priceComparisons[0]?.exchanges[0]?.mid || 51234.84;\n    const exchanges = priceComparisons[0]?.exchanges || [];\n    \n    if (orderRoutingConfig.strategy === 'best_price') {\n      const bestBidExchange = exchanges.reduce((best, current) => \n        current.bid > best.bid ? current : best\n      );\n      return [{ exchange: bestBidExchange.name, quantity, price: bestBidExchange.bid }];\n    }\n    \n    if (orderRoutingConfig.strategy === 'liquidity_weighted') {\n      const totalLiquidity = exchanges.reduce((sum, ex) => sum + ex.liquidity, 0);\n      return exchanges.map(ex => ({\n        exchange: ex.name,\n        quantity: (ex.liquidity / totalLiquidity) * quantity,\n        price: ex.bid\n      }));\n    }\n    \n    return [];\n  };\n  \n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'connected': return 'bg-green-500';\n      case 'connecting': return 'bg-yellow-500';\n      case 'disconnected': return 'bg-gray-500';\n      case 'error': return 'bg-red-500';\n      default: return 'bg-gray-500';\n    }\n  };\n  \n  const getLatencyColor = (latency: number) => {\n    if (latency < 50) return 'text-green-400';\n    if (latency < 80) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gray-900 text-white p-6\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold mb-2 flex items-center gap-3\">\n            <GlobeIcon2 className=\"h-8 w-8 text-blue-400\" />\n            Multi-Exchange Liquidity Aggregator\n          </h1>\n          <p className=\"text-gray-400\">\n            Real-time order book aggregation, best price discovery, and cross-exchange order routing\n          </p>\n        </div>\n        \n        {/* Connection Status Bar */}\n        <div className=\"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {exchangeConnections.map((exchange) => (\n            <Card key={exchange.name} className=\"bg-gray-800 border-gray-700\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`w-3 h-3 rounded-full ${getStatusColor(exchange.status)}`} />\n                    <span className=\"font-medium\">{exchange.name}</span>\n                  </div>\n                  <Badge className={getLatencyColor(exchange.latency)}>\n                    {exchange.latency}ms\n                  </Badge>\n                </div>\n                <div className=\"mt-3 flex items-center justify-between\">\n                  <div className=\"text-sm text-gray-400\">\n                    {exchange.symbols.slice(0, 2).join(', ')}...\n                  </div>\n                  <div className=\"flex gap-2\">\n                    {exchange.status === 'connected' ? (\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\" \n                        onClick={() => handleDisconnectExchange(exchange.name)}\n                        className=\"border-red-500 text-red-500 hover:bg-red-500/10\"\n                      >\n                        Disconnect\n                      </Button>\n                    ) : (\n                      <Button \n                        size=\"sm\" \n                        onClick={() => handleConnectExchange(exchange.name)}\n                        className=\"bg-blue-500 hover:bg-blue-600\"\n                      >\n                        Connect\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n        \n        {/* Main Content */}\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"bg-gray-800 border border-gray-700\">\n            <TabsTrigger value=\"overview\" className=\"data-[state=active]:bg-gray-700\">\n              <GlobeIcon2 className=\"h-4 w-4 mr-2\" />\n              Overview\n            </TabsTrigger>\n            <TabsTrigger value=\"orderbook\" className=\"data-[state=active]:bg-gray-700\">\n              <LayersIcon className=\"h-4 w-4 mr-2\" />\n              Order Book\n            </TabsTrigger>\n            <TabsTrigger value=\"pricing\" className=\"data-[state=active]:bg-gray-700\">\n              <ArrowRightLeft className=\"h-4 w-4 mr-2\" />\n              Price Comparison\n            </TabsTrigger>\n            <TabsTrigger value=\"routing\" className=\"data-[state=active]:bg-gray-700\">\n              <Gauge className=\"h-4 w-4 mr-2\" />\n              Order Routing\n            </TabsTrigger>\n            <TabsTrigger value=\"depth\" className=\"data-[state=active]:bg-gray-700\">\n              <BarChartIcon2 className=\"h-4 w-4 mr-2\" />\n              Liquidity Depth\n            </TabsTrigger>\n          </TabsList>\n          \n          {/* Overview Tab */}\n          <TabsContent value=\"overview\" className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <Card className=\"bg-gray-800 border-gray-700 lg:col-span-2\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <ActivityIcon className=\"h-5 w-5 text-blue-400\" />\n                    Real-time Market Overview\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {priceComparisons.map((comparison) => (\n                      <div key={comparison.symbol} className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <h3 className=\"text-lg font-semibold\">{comparison.symbol}</h3>\n                            <p className=\"text-sm text-gray-400\">Cross-exchange price aggregation</p>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"text-2xl font-bold\">\n                              ${comparison.exchanges[0]?.mid.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                            </div>\n                            <div className={`text-sm ${comparison.arbitrageOpportunity > 1 ? 'text-green-400' : 'text-yellow-400'}`}>\n                              Arbitrage: ${comparison.arbitrageOpportunity.toFixed(2)}\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                          <div className=\"bg-gray-900 p-4 rounded-lg\">\n                            <div className=\"text-sm text-gray-400\">Best Bid</div>\n                            <div className=\"text-xl font-bold text-green-400\">\n                              ${comparison.bestBidExchange}: ${comparison.exchanges.find(e => e.name === comparison.bestBidExchange)?.bid.toFixed(2)}\n                            </div>\n                          </div>\n                          <div className=\"bg-gray-900 p-4 rounded-lg\">\n                            <div className=\"text-sm text-gray-400\">Best Ask</div>\n                            <div className=\"text-xl font-bold text-red-400\">\n                              ${comparison.bestAskExchange}: ${comparison.exchanges.find(e => e.name === comparison.bestAskExchange)?.ask.toFixed(2)}\n                            </div>\n                          </div>\n                          <div className=\"bg-gray-900 p-4 rounded-lg\">\n                            <div className=\"text-sm text-gray-400\">Spread</div>\n                            <div className=\"text-xl font-bold\">\n                              ${comparison.exchanges[0]?.spread.toFixed(2)}\n                            </div>\n                          </div>\n                          <div className=\"bg-gray-900 p-4 rounded-lg\">\n                            <div className=\"text-sm text-gray-400\">Total Liquidity</div>\n                            <div className=\"text-xl font-bold\">\n                              ${(aggregatedOrderBook.totalBidLiquidity + aggregatedOrderBook.totalAskLiquidity).toFixed(1)}M\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n              \n              <Card className=\"bg-gray-800 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <ZapIcon2 className=\"h-5 w-5 text-yellow-400\" />\n                    Quick Order\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"orderType\">Order Type</Label>\n                      <Select defaultValue=\"market\">\n                        <SelectTrigger className=\"bg-gray-900 border-gray-700\">\n                          <SelectValue placeholder=\"Select order type\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-gray-800 border-gray-700\">\n                          <SelectItem value=\"market\">Market Order</SelectItem>\n                          <SelectItem value=\"limit\">Limit Order</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"side\">Side</Label>\n                      <Select defaultValue=\"buy\">\n                        <SelectTrigger className=\"bg-gray-900 border-gray-700\">\n                          <SelectValue placeholder=\"Select side\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-gray-800 border-gray-700\">\n                          <SelectItem value=\"buy\" className=\"text-green-400\">Buy</SelectItem>\n                          <SelectItem value=\"sell\" className=\"text-red-400\">Sell</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    \n                    <div>\n                      <Label htmlFor=\"quantity\">Quantity (BTC)</Label>\n                      <Input \n                        id=\"quantity\" \n                        type=\"number\" \n                        defaultValue=\"1\" \n                        className=\"bg-gray-900 border-gray-700\" \n                      />\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-400\">Estimated Price</span>\n                        <span className=\"font-bold\">$51,234.56</span>\n                      </div>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-400\">Total Cost</span>\n                        <span className=\"font-bold\">$51,234.56</span>\n                      </div>\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm text-gray-400\">Best Exchange</span>\n                        <span className=\"font-bold text-green-400\">Binance</span>\n                      </div>\n                    </div>\n                    \n                    <Button className=\"w-full bg-blue-500 hover:bg-blue-600\">\n                      Execute Smart Order\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n          \n          {/* Order Book Tab */}\n          <TabsContent value=\"orderbook\" className=\"space-y-6\">\n            <Card className=\"bg-gray-800 border-gray-700\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-2\">\n                    <LayersIcon className=\"h-5 w-5 text-blue-400\" />\n                    Aggregated Order Book - {selectedSymbol}\n                  </div>\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <Switch \n                        checked={isAutoRefresh} \n                        onCheckedChange={setIsAutoRefresh}\n                      />\n                      <span className=\"text-sm\">Auto-refresh</span>\n                    </div>\n                    <Button size=\"sm\" variant=\"outline\" className=\"border-gray-600\">\n                      <RefreshCw className=\"h-4 w-4 mr-2\" />\n                      Refresh\n                    </Button>\n                  </div>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                  {/* Bids */}\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm text-gray-400 mb-2\">\n                      <span>Bids (Buy Orders)</span>\n                      <span>Total: {aggregatedOrderBook.totalBidLiquidity.toFixed(1)} BTC</span>\n                    </div>\n                    <div className=\"space-y-1 max-h-96 overflow-y-auto\">\n                      {aggregatedOrderBook.aggregatedBids.map((bid, index) => (\n                        <div \n                          key={index} \n                          className=\"flex justify-between items-center p-2 hover:bg-gray-900/50 rounded\"\n                        >\n                          <div className=\"text-green-400 font-medium\">\n                            ${bid.price.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                          </div>\n                          <div className=\"text-right\">\n                            <div className=\"font-medium\">{bid.totalQuantity.toFixed(3)}</div>\n                            <div className=\"text-xs text-gray-400\">{bid.exchanges.join(', ')}</div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  {/* Spread & Price Info */}\n                  <div className=\"flex flex-col items-center justify-center space-y-4\">\n                    <div className=\"text-center\">\n                      <div className=\"text-3xl font-bold mb-2\">\n                        ${aggregatedOrderBook.bestBid.toLocaleString(undefined, { minimumFractionDigits: 2 })} / \n                        ${aggregatedOrderBook.bestAsk.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                      </div>\n                      <div className=\"text-lg text-gray-400\">Best Bid / Best Ask</div>\n                    </div>\n                    \n                    <div className=\"text-center\">\n                      <div className={`text-2xl font-bold ${aggregatedOrderBook.spread < 1 ? 'text-green-400' : 'text-yellow-400'}`}>\n                        Spread: ${aggregatedOrderBook.spread.toFixed(2)}\n                      </div>\n                      <div className=\"text-sm text-gray-400 mt-1\">\n                        {(aggregatedOrderBook.spread / aggregatedOrderBook.bestBid * 10000).toFixed(2)} bps\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 w-full\">\n                      <div className=\"bg-gray-900 p-4 rounded-lg text-center\">\n                        <div className=\"text-sm text-gray-400\">Bid Liquidity</div>\n                        <div className=\"text-xl font-bold text-green-400\">\n                          {aggregatedOrderBook.totalBidLiquidity.toFixed(1)} BTC\n                        </div>\n                      </div>\n                      <div className=\"bg-gray-900 p-4 rounded-lg text-center\">\n                        <div className=\"text-sm text-gray-400\">Ask Liquidity</div>\n                        <div className=\"text-xl font-bold text-red-400\">\n                          {aggregatedOrderBook.totalAskLiquidity.toFixed(1)} BTC\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Asks */}\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm text-gray-400 mb-2\">\n                      <span>Asks (Sell Orders)</span>\n                      <span>Total: {aggregatedOrderBook.totalAskLiquidity.toFixed(1)} BTC</span>\n                    </div>\n                    <div className=\"space-y-1 max-h-96 overflow-y-auto\">\n                      {aggregatedOrderBook.aggregatedAsks.map((ask, index) => (\n                        <div \n                          key={index} \n                          className=\"flex justify-between items-center p-2 hover:bg-gray-900/50 rounded\"\n                        >\n                          <div className=\"text-red-400 font-medium\">\n                            ${ask.price.toLocaleString(undefined, { minimumFractionDigits: 2 })}\n                          </div